:root{
    --white: #FFFFFF;
    /* novo tom de verde mais claro para melhor leitura em dark mode */
    --light-green: #d7ffd9;
    --green: #9ef0b0;
    --dark-green: #0A3323;
    --black: #000000;
    --muted: rgba(10,51,35,0.06);
    --text: #0A3323;
}

/* Dark theme variables when body has .dark */
body.dark {
    --white: #0f1720;
    /* usar o mesmo verde claro no tema escuro para melhor contraste */
    --light-green: #9ef0b0;
    --green: #9ef0b0;
    --dark-green: #d7f3d8; /* used as light text */
    --black: #ffffff;
    --muted: rgba(255,255,255,0.03);
    --text: #e6fff0;
}

/* Reset básico */
* { margin: 0; padding: 0; box-sizing: border-box; }

/* Tipografia moderna */
body { background: linear-gradient(180deg, #f7fbf6 0%, #ffffff 100%); color: var(--text); font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
body.dark { background: linear-gradient(180deg, #071018 0%, #081219 100%); color: var(--text); }

/* Central container for content */
main { padding: 28px; max-width: 1100px; margin: 0 auto; }

/* Cabeçalho */
header { background: linear-gradient(90deg, #062b1f 0%, #0b3b28 100%); color: var(--white); padding: 16px 0; box-shadow: 0 6px 18px rgba(10,51,35,0.06); }
header .header-inner { max-width: 1100px; margin: 0 auto; padding: 0 20px; display:flex; align-items:center; justify-content:space-between; }
header .logo { font-size: 1.25rem; font-weight: 700; color: #d9f3d8; display:flex; gap:10px; align-items:center; }
header .logo { position: relative; }
header .logo .logo-sub { font-size: 0.7rem; color: rgba(217,243,216,0.9); font-weight:600; margin-left:6px; margin-top:2px; }
header nav { display:flex; align-items:center; gap:12px; }
header nav a { color: rgba(255,255,255,0.92); text-decoration: none; margin-left: 10px; font-weight: 600; padding:8px 12px; border-radius:8px; }
header nav a.active, header nav a:hover { background: rgba(255,255,255,0.06); }
.btn-denuncia { background-color: var(--green); padding: 10px 18px; border-radius: 8px; transition: transform .12s ease, box-shadow .12s ease; color: var(--white); border: none; font-weight:600; }
.btn-denuncia:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(158,240,176,0.12); }

/* Layout Geral */
h1 { margin-bottom: 18px; color: var(--dark-green); font-weight:800; text-align:center; }

/* Smaller page headings */
h2 { color: var(--dark-green); margin-bottom: 12px; }

/* Mapa */
#mapa-residuos, #mapa-selecao { width: 100%; border-radius: 12px; border: 1px solid rgba(10,51,35,0.06); box-shadow: 0 8px 24px rgba(10,51,35,0.04); }
#mapa-residuos { height: 420px; margin-bottom: 22px; }
#mapa-selecao { height: 260px; margin-top: 10px; }

/* Estatísticas */
.stats-container { display: flex; gap: 20px; margin-top: 20px; }
.card { background: linear-gradient(180deg, rgba(158,240,176,0.06) 0%, rgba(255,255,255,0.85) 100%); padding: 22px; border-radius: 12px; flex: 1; text-align: center; box-shadow: 0 12px 30px rgba(10,51,35,0.04); border: 1px solid rgba(10,51,35,0.04); }
.card h3 { font-size: 0.9rem; color: rgba(10,51,35,0.7); text-transform: uppercase; }
.card p { font-size: 2rem; font-weight: 700; color: var(--dark-green); }

/* Formulário de Denúncia */
.form-container { background: #fff; padding: 28px; border-radius: 14px; box-shadow: 0 18px 40px rgba(10,51,35,0.04); text-align: center; border: 1px solid rgba(10,51,35,0.03); }
.upload-box { border: 2px dashed rgba(158,240,176,0.45); padding: 34px; border-radius: 12px; cursor: pointer; background: linear-gradient(180deg, rgba(158,240,176,0.04), rgba(203,221,181,0.02)); margin-bottom: 20px; transition: transform .12s ease, background .12s ease; }
.upload-box:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(10,51,35,0.04); }
.upload-label { cursor: pointer; color: var(--dark-green); font-weight: 700; }
input[type="file"] { display: none; }

/* Canvas e Preview */
#canvas-preview { max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 20px; display: none; border: 4px solid rgba(10,51,35,0.06); }
.campo-adicional { text-align: left; margin-bottom: 18px; }
.campo-adicional label { font-weight: 700; display: block; margin-bottom: 8px; color: var(--dark-green); }
.input-estilizado { width: 100%; padding: 12px; border: 1px solid rgba(10,51,35,0.08); border-radius: 8px; }

/* Select específico para bairro */
select.input-estilizado { appearance: none; -webkit-appearance: none; -moz-appearance: none; background: white url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%230A3323" d="M2 0L0 2h4z"/></svg>') no-repeat right 12px center; background-size: 10px; }
.info-bairro { margin-top: 8px; color: rgba(10,51,35,0.8); font-size: 0.95rem; }
.info-bairro b { color: var(--dark-green); }

.card table button { padding: 6px 8px; border-radius: 6px; border: none; background: #0A3323; color: white; cursor: pointer; }
.card h3 { margin-bottom: 10px; }

/* Spinner / estado de busca */
#reverse-spinner { font-style: italic; }

#btn-clear-cache { font-size: 0.85rem; }

/* Botões e Resultados */
#btn-analisar { width: 100%; padding: 14px; background: linear-gradient(180deg, var(--dark-green), #0b3b28); color: var(--white); border: none; border-radius: 10px; font-size: 1.05rem; cursor: pointer; transition: transform .12s ease, box-shadow .12s ease; }
#btn-analisar:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 12px 30px rgba(10,51,35,0.08); }
#btn-analisar:disabled { background: rgba(10,51,35,0.18); color: rgba(255,255,255,0.7); }
.resultado-box { margin-top: 20px; padding: 16px; border-radius: 10px; font-weight: 700; }
.sucesso { background-color: rgba(158,240,176,0.12); color: var(--dark-green); border: 1px solid rgba(158,240,176,0.18); }

/* Tabela / Gráficos */
table { width: 100%; border-collapse: collapse; color: var(--dark-green); font-size: 0.95rem; }
th, td { padding: 10px 14px; text-align: left; border-bottom: 1px solid rgba(10,51,35,0.06); }
th { background: linear-gradient(180deg, rgba(10,51,35,0.03), rgba(255,255,255,0.02)); color: var(--dark-green); font-weight:700; }

.table-card { overflow-x:auto; }

/* Ajustes finais */
a { color: var(--dark-green); }
button { font-family: inherit; }

/* Barra de filtros (relatorios) */
.filter-bar { display:flex; gap:16px; align-items:center; justify-content: space-between; flex-wrap:wrap; margin-bottom: 16px; }
.filter-group { display:flex; flex-direction: column; gap:6px; min-width: 160px; }
.filter-group label { font-size: 0.85rem; color: rgba(10,51,35,0.8); }
.filter-group select { padding: 8px 10px; border-radius: 6px; border: 1px solid rgba(10,51,35,0.08); }
.quick-buttons { display:flex; gap:8px; align-items:center; }
.quick-buttons button { padding: 8px 12px; background: var(--green); border: none; color: white; border-radius: 6px; cursor:pointer; transition: transform .06s ease; }
.quick-buttons button:hover { transform: translateY(-2px); }

/* Tabela detalhada mais legível */
table tbody tr:hover { background: rgba(10,51,35,0.03); }
td:nth-child(4) { text-align: center; }

/* Responsividade */
@media (max-width: 800px) {
    .filter-bar { flex-direction: column; align-items: stretch; }
    .filter-group { min-width: 100%; }
}

/* Botões da tabela */
.card table button { padding: 6px 8px; border-radius: 6px; border: none; background: #0A3323; color: white; cursor: pointer; }

/* Pequeno refinamento global */
header nav a { margin-left: 14px; }
.logo { letter-spacing: 0.4px; }
.form-container { max-width: 760px; }

/* Modal simples */
.modal { position: fixed; left: 0; top: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.35); }
.modal-content { background: white; padding: 18px; border-radius: 10px; width: 420px; max-width: 94%; box-shadow: 0 18px 40px rgba(0,0,0,0.18); }
.modal-body label { display: block; margin-bottom: 10px; }

/* Toast */
.toast { background: #072b1f; color: white; padding: 12px 16px; border-radius: 8px; margin-top: 8px; box-shadow: 0 8px 20px rgba(0,0,0,0.18); display:flex; gap:12px; align-items:center; }
.toast button { background: rgba(255,255,255,0.08); color: white; border: none; padding: 8px 10px; border-radius: 6px; cursor: pointer; }

/* Thumbnail in table */
.thumb { width: 60px; height: 40px; object-fit: cover; border-radius: 6px; border: 1px solid rgba(10,51,35,0.06); }

/* Feed estilo Instagram (index) */
.feed-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 18px; margin-top: 12px; }
.feed-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 12px 30px rgba(0,0,0,0.08); border: 1px solid rgba(10,51,35,0.04); position: relative; }
.feed-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 12px 30px rgba(0,0,0,0.08); border: 1px solid rgba(10,51,35,0.04); position: relative; display:flex; flex-direction:column; }
.feed-img { width:100%; aspect-ratio: 1 / 1; object-fit: cover; display:block; transition: transform .35s ease, filter .35s ease; }
.feed-card:hover .feed-img { transform: scale(1.04); filter: contrast(1.02) saturate(1.05); }
/* meta positioned at top to emphasize author like Instagram */
.feed-meta { position: absolute; left: 12px; right: 12px; top: 12px; padding: 8px 10px; display:flex; align-items:center; justify-content:space-between; gap:8px; background: linear-gradient(180deg, rgba(0,0,0,0.45) 0%, rgba(0,0,0,0.12) 100%); color: white; border-radius: 8px; }
.feed-meta .left { display:flex; gap:10px; align-items:center; }
.user-badge-small { background: rgba(10,51,35,0.95); color:white; padding:8px 10px; border-radius:999px; font-weight:800; font-size:0.95rem; box-shadow: 0 6px 18px rgba(0,0,0,0.12); }
.feed-caption { color: rgba(255,255,255,0.98); font-size:0.95rem; margin-left:8px; font-weight:600; }
.feed-actions { display:flex; gap:8px; align-items:center; }
.feed-actions button { padding:8px 10px; border-radius:8px; border:none; cursor:pointer; font-weight:700; }
.feed-actions .btn-view { background:rgba(255,255,255,0.12); color:white; }
.feed-actions .btn-resolve { background:#2ecc71; color:white; }

/* footer area below image for details when card expanded */
.feed-card .details-footer { padding:10px 12px; font-size:0.92rem; color: var(--dark-green); background: white; }

/* Dark adjustments for cards, header, modal and toasts */
body.dark header { background: linear-gradient(90deg, #021214 0%, #06161a 100%); color: var(--text); }
body.dark .card { background: linear-gradient(180deg, rgba(10,20,16,0.13) 0%, rgba(8,12,14,0.05) 100%); box-shadow: 0 8px 24px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.04); }
body.dark .modal-content { background: #081218; color: var(--text); }
body.dark .toast { background: #09221a; }
body.dark .feed-card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.04); box-shadow: 0 12px 30px rgba(0,0,0,0.5); }
body.dark .feed-card .details-footer { background: transparent; color: var(--text); }
body.dark .feed-meta { background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.18) 100%); }

/* Dark mode button */
.btn-dark { background: transparent; border: 1px solid rgba(255,255,255,0.08); color: var(--text); padding: 6px 10px; border-radius: 8px; cursor: pointer; font-weight:700; }
.btn-dark[aria-pressed="true"] { background: rgba(255,255,255,0.06); }

/* Improve contrast specifically for dark mode (overrides to ensure legibility) */
body.dark {
    /* higher-contrast helper variables for text */
    --text-high: #e9ffee;         /* main readable text */
    --text-med:  rgba(255,255,255,0.85);
    --text-muted: rgba(255,255,255,0.68);
    --muted-border: rgba(255,255,255,0.06);
}

/* Header / nav */
body.dark header { color: var(--text-high); }
body.dark header nav a { color: var(--text-med); }
body.dark header .logo .logo-sub { color: rgba(160,230,175,0.95); }

/* Headings and hero */
body.dark h1, body.dark h2, body.dark .hero-banner .hero-text b { color: var(--text-high); }
body.dark .hero-banner { color: var(--text-med); }

/* Cards and small labels */
body.dark .card h3, body.dark .filter-group label, body.dark th { color: var(--text-med); }
body.dark .card p, body.dark .feed-caption { color: var(--text-high); }

/* Tables */
body.dark table, body.dark th, body.dark td { color: var(--text-med); }
body.dark th, body.dark td { border-bottom: 1px solid rgba(255,255,255,0.08); }
body.dark table tbody tr:hover { background: rgba(255,255,255,0.03); }

/* Stronger header background & weight for tables in dark mode */
body.dark th { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); font-weight:800; color: var(--text-high); }

/* Feed card/meta */
body.dark .feed-meta { color: var(--text-high); }
body.dark .feed-meta .user-badge-small { background: rgba(0,0,0,0.6); color: var(--text-high); }
body.dark .feed-actions .btn-view { color: var(--text-high); }
body.dark .feed-card .details-footer { color: var(--text-med); }

/* Thumbnails, inputs and interactive elements */
body.dark .thumb { border: 1px solid var(--muted-border); }
body.dark .input-estilizado, body.dark select.input-estilizado { background: rgba(255,255,255,0.02); color: var(--text-high); border: 1px solid rgba(255,255,255,0.06); }
body.dark .filter-group select { color: var(--text-high); }

/* Upload area contrast */
body.dark .upload-box { border: 2px dashed rgba(255,255,255,0.08); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); }
body.dark .upload-label { color: var(--text-high); }

/* Toasts and modal text */
body.dark .toast { color: var(--text-high); }
body.dark .modal-content { color: var(--text-high); }

/* Links */
body.dark a { color: #9ef0b0; }

/* Ensure the dark mode toggle remains legible */
body.dark .btn-dark { color: var(--text-high); border-color: rgba(255,255,255,0.08); }

/* fade-in animation for cards */
@keyframes fadeInUp { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }
.feed-card { animation: fadeInUp .42s ease both; }

/* Modal específico para visualização da foto */
#photo-modal .modal-content { max-width:900px; width:95%; display:flex; gap:12px; align-items:flex-start; }
#photo-modal img { max-width: 60%; height: auto; border-radius:8px; }
#photo-modal .details { flex:1; }

@media (max-width:700px) {
    .feed-img { aspect-ratio: 1 / 1; }
    #photo-modal .modal-content { flex-direction:column; }
    #photo-modal img { max-width:100%; }
}

/* Hero / banner to emphasize AI project theme */
.hero-banner { background: linear-gradient(90deg, rgba(158,240,176,0.06), rgba(158,240,176,0.03)); border: 1px solid rgba(158,240,176,0.12); padding: 12px 16px; border-radius: 10px; display:flex; gap:12px; align-items:center; margin: 12px 0; color: var(--dark-green); }
.hero-banner .ai-chip { background: linear-gradient(180deg,#bfffe0,#9ef0b0); color: white; padding: 8px 10px; border-radius: 999px; font-weight:800; box-shadow: 0 8px 20px rgba(158,240,176,0.18); }
.hero-banner .hero-text { font-size: 0.95rem; line-height:1.2; }
.hero-banner .hero-text b { display:block; font-size:1.03rem; color: var(--dark-green); }

/* small responsive tweak */
@media (max-width:700px) {
    .hero-banner { flex-direction: column; align-items: flex-start; }
    .hero-banner .ai-chip { padding: 6px 8px; }
}